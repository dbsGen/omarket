!function a(o,r,c){function p(e,t){if(!r[e]){if(!o[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(l)return l(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var n=r[e]={exports:{}};o[e][0].call(n.exports,function(t){return p(o[e][1][t]||t)},n,n.exports,a,o,r,c)}return r[e].exports}for(var l="function"==typeof require&&require,t=0;t<c.length;t++)p(c[t]);return p}({1:[function(t,e,i){var n={host:"https://mainnet.nebulas.io",address:"n1y44Zo4HrnbQTBcdWayguxKxZeuuXvp6wm"},r=0,c=nebulas.Account;function s(t){this.options=$.extend({},n,t),this.neb=new nebulas.Neb,this.neb.setRequest(new nebulas.HttpRequest(this.options.host)),this.queue=[],window.postMessage({target:"contentscript",data:{},method:"getAccount"},"*");var s=this;window.onmessage=function(t){var e=t.data.data;if(e)if(e.account)s.account=e.account,s.onAccount&&s.onAccount(s.account);else if(e.neb_call){if(s.queue.length)(i=s.queue.shift())&&((e=e.neb_call).execute_err&&0<e.execute_err.length&&i._catch?i._catch(e.execute_err):i._then&&i._then(e))}else if(e.txhash){var i;if(s.queue.length)(i=s.queue.shift())&&(e=e.txhash,i._then&&i._then(e))}}}s.prototype.call=function(){if(0<arguments.length){for(var t=arguments[0],e=[],i=1;i<arguments.length;++i)e.push(arguments[i]);var s={then:function(t){return this._then=t,this},catch:function(t){return this._catch=t,this}},n=this;return a=s,n.queue.push(a),window.postMessage({target:"contentscript",data:{to:n.options.address,value:"0",contract:{function:t,args:JSON.stringify(e)}},method:"neb_call"},"*"),s}var a},s.prototype.transaction=function(){if(0<arguments.length){for(var t=arguments[0],e=[],i=1;i<arguments.length;++i)e.push(arguments[i]);var s={then:function(t){return this._then=t,this},catch:function(t){return this._catch=t,this}},n=this;return a=s,n.queue.push(a),window.postMessage({target:"contentscript",data:{to:n.options.address,value:"0",contract:{function:t,args:JSON.stringify(e)}},method:"neb_sendTransaction"},"*"),s}var a},s.prototype.locCall=function(){if(0<arguments.length){for(var t=arguments[0],e=[],i=1;i<arguments.length;++i)e.push(arguments[i]);var s={then:function(t){return this._then=t,this},catch:function(t){return this._catch=t,this}},n=this;return a=s,(o=n.account)||(o=c.NewAccount().getAddressString()),n.neb.api.call({from:o,to:n.options.address,value:0,nonce:r++,gasPrice:1e6,gasLimit:2e6,contract:{function:t,args:JSON.stringify(e)}}).then(function(t){a._then&&a._then(t)}).catch(function(t){a._catch&&a._catch(t)}),s}var a,o},e.exports=new s},{}],2:[function(t,e,i){function s(t){this.$elem=t}s.prototype.error=function(t){"string"==typeof t?this._input("<div class='out-error'>"+t+"</div>"):t instanceof HTMLElement?this._input("<div class='out-error'>"+$(t).html()+"</div>"):this._input("<div class='out-error'>"+JSON.stringify(t)+"</div>")},s.prototype.log=function(t){"string"==typeof t?this._input("<div class='out-log'>"+t+"</div>"):t instanceof HTMLElement?this._input("<div class='out-log'>"+$(t).html()+"</div>"):this._input("<div class='out-log'>"+JSON.stringify(t)+"</div>")},s.prototype.warn=function(t){"string"==typeof t?this._input("<div class='out-warn'>"+t+"</div>"):t instanceof HTMLElement?this._input("<div class='out-warn'>"+$(t).html()+"</div>"):this._input("<div class='out-warn'>"+JSON.stringify(t)+"</div>")},s.prototype._input=function(t){t=t.replace("\n","<br/>");var e=$(t);e.hide(),this.$elem.prepend(e),e.slideDown()},s.prototype.html=function(t){var e=$(t);e.hide(),this.$elem.prepend(e),e.slideDown()},e.exports=s},{}],3:[function(t,e,i){function n(){this.status=n.LOADING,this.LOADING=0,this.CHECKED=1,this.FAILED=2}n.HTML='<div id="loadingCell"></div>',n.LOADING=0,n.CHECKED=1,n.FAILED=2,n.prototype.show=function(t,e){this.$elem||(this.$elem=$(n.HTML),$("body").append(this.$elem),this.children=[],this.$loading=$('<div class="loading" style="display: none"></div>'),this.$elem.append(this.$loading),this.$check=$('<div class="octicon octicon-check text-success" style="display: none"></div>'),this.$elem.append(this.$check),this.$failed=$('<div class="octicon octicon-x text-danger" style="display: none"></div>'),this.$elem.append(this.$failed),this.$text=$('<div class="text"></div>'),this.$elem.append(this.$text),this.$elem.css("right","-10px"),this.$elem.css("opacity","0"),this.children.push(this.$loading),this.children.push(this.$check),this.children.push(this.$failed)),this.timer&&clearTimeout(this.timer),t=t||n.LOADING,this.children[t].css("display","block"),this.setStatus(t,e)},n.prototype.miss=function(t){t=t||0;var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.$elem.stop(),e.$elem.animate({right:"-10px",opacity:"0"},600,function(){e.$check.css("display","none"),e.$failed.css("display","none"),e.$text.css("display","none")}),e.timer=null},t)},n.prototype.setStatus=function(t,e){if(t!=this.status&&this.$elem){var i=this.status;this.status=t,this.children[i]&&this.children[i].fadeOut("fast"),this.children[this.status]&&this.children[this.status].fadeIn("fast")}e=e||"";var s=0;this.$text.text()!=e&&(this.$text.text(e),s=this.$text.width()),t===n.FAILED?(this.$text.removeClass("text-success"),this.$text.addClass("text-danger")):(t===n.CHECKED?this.$text.addClass("text-success"):this.$text.removeClass("text-success"),this.$text.removeClass("text-danger")),0<e.length&&this.$text.css("display","inline"),this.$elem.stop(),this.$elem.animate({right:s+20+"px",opacity:"1"},600)},e.exports=new n},{}],4:[function(t,e,i){e.exports={"zh-CN":{Android:"安卓应用",DApp:"DApp",Post:"提交应用",Name:"名字",Cover:"封面","Not login":"没有检测到账户信息，请先登陆 或者 安装账户插件",Address:"应用地址",Version:"版本号","App ID":"App ID",Submit:"提交","Lack of name":"没有名字","Lack of cover":"没有封面","Lack of app id":"没有AppID","Lack of version":"没有版本号","Lack of address":"没有地址",Output:"输出:",Success:"成功",Failed:"失败","Last modified":"更新","Download APK":"下载APK","Other versions":"其他版本",Uploader:"UP主",Description:"描述","My Apps":"我的应用",Select:"选取",Visible:"可见","Lack of des":"没有简介",Preview:"预览",Comments:"评论","Post Comment":"发送","Ipfs hash":"Ipfs Hash","Upload link":"上传地址",instructions1:"如果只需要更新信息不用填入版本号和地址"},en:{Android:"Android",DApp:"DApp",Post:"Post Application",Name:"Name",Cover:"Cover","Not login":"No account info found, login first or install plugin",Address:"Address",Version:"Version","App ID":"App ID",Submit:"Submit","Lack of name":"Lack of name","Lack of cover":"Lack of cover","Lack of app id":"Lack of APP ID","Lack of version":"Lack of version","Lack of address":"Lack of address",Output:"Output",Success:"Success",Failed:"Failed","Last modified":"Modified","Download APK":"Download APK","Other versions":"Other versions",Uploader:"Uploader",Description:"Description","My Apps":"My Apps",Select:"Select",Visible:"Visible","Lack of des":"Lack of description",Preview:"Preview",Comments:"Comments","Post Comment":"Post Comment","Ipfs hash":"Ipfs Hash","Upload link":"Upload link",instructions1:"Version and Address is optional when update app info."}}},{}],5:[function(t,e,i){var s,n=t("./loc.json");function a(){$("*[data-text]").each(function(){var t=$(this);t.text(o(t.attr("data-text")))}),$("*[data-placeholder]").each(function(){var t=$(this);t.attr("placeholder",o(t.attr("data-placeholder")))})}function o(t){return a.words[t]||t}s=navigator.language?navigator.language:navigator.browserLanguage,a.loc=o,a.words=/^zh/.test(s)?n["zh-CN"]:n.en,e.exports=a},{"./loc.json":4}],6:[function(t,e,i){var a=t("./localization"),s=t("./console_output"),o=t("./loading_spinner");a();$("#alert");var r=t("./account");function c(t){this.app_id=t,this.elem=document.createElement("tr"),this.elem.innerHTML="<td>"+t+"</td>";var e=document.createElement("td"),i=this;this.selectElem=document.createElement("a"),this.selectElem.setAttribute("href","javascript:void(0)"),this.selectElem.innerText=a.loc("Select"),this.selectElem.onclick=function(){i.onSelect()},e.appendChild(this.selectElem),this.elem.appendChild(e)}c.prototype.onSelect=function(){var t;t=this.app_id,o.show(o.LOADING),r.locCall("fetchOne",r.account+"/"+t).then(function(t){var e=JSON.parse(t.result);!function(t){h.val(t.name),u.val(t.pic_address),f.val(t.app_id),g.val(t.des);var e=n.offset();if(t.visible){var i=$("#visible");i.prop("checked","checked"),i.parent().addClass("active"),$("#disable").parent().removeClass("active")}else{var i=$("#disable");i.prop("checked","checked"),i.parent().addClass("active"),$("#visible").parent().removeClass("active")}window.scrollTo(0,e.top)}(e),o.setStatus(o.CHECKED),o.miss(600)}).catch(function(t){o.setStatus(o.FAILED),o.miss(600)})},setTimeout(function(){r.account||A(a.loc("Not login")+' <a href="https://github.com/ChengOrangeJu/WebExtensionWallet" target="_blank">Plugin</a>')},1e3);var p=new s($("#output")),l=$("#postForm"),h=$("#appName"),u=$("#appPic"),d=$("#appVersion"),f=$("#appAppID"),v=$("#appAddress"),m=($("#appSubmit"),$("#myApps")),g=$("#appDes"),n=$("#post-pos");function A(t){p.error(t)}l.on("submit",function(){if(r.account){for(var t=l.serializeArray(),i={},e=0,s=t.length;e<s;++e){var n=t[e];i[n.name]=n.value}if(0===i.appName.trim().length)return A(a.loc("Lack of name")),!1;if(0===i.appPic.trim().length)return A(a.loc("Lack of cover")),!1;if(0===i.appAppID.trim().length)return A(a.loc("Lack of app id")),!1;if(0===i.appDes.trim().length)return A(a.loc("Lack of des")),!1;r.transaction("post",i.appType,i.appName,i.appAppID,i.appVersion,i.appAddress,i.appPic,i.appDes,"visible"===i.appVisible).then(function(t){p.log(a.loc("Success")+" : "+i.appName+"("+i.appAppID+") v:"+i.appVersion),h.val(""),u.val(""),d.val(""),f.val(""),v.val(""),g.val(""),g.val("");var e=$("#visible");e.prop("checked","checked"),e.parent().addClass("active"),$("#disable").parent().removeClass("active")}).catch(function(t){p.error(a.loc("Failed")+" : "+JSON.stringify(t))})}else A(a.loc("Not login")+' <a href="https://github.com/ChengOrangeJu/WebExtensionWallet" target="_blank">Plugin</a>');return!1}),r.onAccount=function(t){o.show(o.LOADING),r.locCall("myApps").then(function(t){var e=JSON.parse(t.result);if(e){for(var i=$("#myAppsTable").find("tbody"),s=0,n=e.length;s<n;++s){var a=new c(e[s]);i.append(a.elem)}m.slideDown()}o.setStatus(o.CHECKED),o.miss(600)}).catch(function(t){o.setStatus(o.FAILED),o.miss(600)})},$("#preView").click(function(){if(!r.account)return!1;for(var t=l.serializeArray(),e={},i=0,s=t.length;i<s;++i){var n=t[i];e[n.name]=n.value}if(0===e.appName.trim().length)return A(a.loc("Lack of name")),!1;if(0===e.appPic.trim().length)return A(a.loc("Lack of cover")),!1;if(0===e.appAppID.trim().length)return A(a.loc("Lack of app id")),!1;if(0===e.appDes.trim().length)return A(a.loc("Lack of des")),!1;e={owner:r.account,name:e.appName,pic_address:e.appPic,app_id:e.appAppID,des:e.appDes,test:!0,releases:[{version:e.appVersion,address:e.appAddress}]};return localStorage.setItem("tmp_app_info",JSON.stringify(e)),this.setAttribute("href","apk/#"+e.owner+"/"+e.app_id),!0})},{"./account":1,"./console_output":2,"./loading_spinner":3,"./localization":5}]},{},[6]);