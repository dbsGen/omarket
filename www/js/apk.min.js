!function o(a,r,c){function l(e,t){if(!r[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(h)return h(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var s=r[e]={exports:{}};a[e][0].call(s.exports,function(t){return l(a[e][1][t]||t)},s,s.exports,o,a,r,c)}return r[e].exports}for(var h="function"==typeof require&&require,t=0;t<c.length;t++)l(c[t]);return l}({1:[function(t,e,n){var s={host:"https://mainnet.nebulas.io",address:"n1y44Zo4HrnbQTBcdWayguxKxZeuuXvp6wm"},r=0,c=nebulas.Account;function i(t){this.options=$.extend({},s,t),this.neb=new nebulas.Neb,this.neb.setRequest(new nebulas.HttpRequest(this.options.host)),this.queue=[],window.postMessage({target:"contentscript",data:{},method:"getAccount"},"*");var i=this;window.onmessage=function(t){var e=t.data.data;if(e)if(e.account)i.account=e.account,i.onAccount&&i.onAccount(i.account);else if(e.neb_call){if(i.queue.length)(n=i.queue.shift())&&((e=e.neb_call).execute_err&&0<e.execute_err.length&&n._catch?n._catch(e.execute_err):n._then&&n._then(e))}else if(e.txhash){var n;if(i.queue.length)(n=i.queue.shift())&&(e=e.txhash,n._then&&n._then(e))}}}i.prototype.call=function(){if(0<arguments.length){for(var t=arguments[0],e=[],n=1;n<arguments.length;++n)e.push(arguments[n]);var i={then:function(t){return this._then=t,this},catch:function(t){return this._catch=t,this}},s=this;return o=i,s.queue.push(o),window.postMessage({target:"contentscript",data:{to:s.options.address,value:"0",contract:{function:t,args:JSON.stringify(e)}},method:"neb_call"},"*"),i}var o},i.prototype.transaction=function(){if(0<arguments.length){for(var t=arguments[0],e=[],n=1;n<arguments.length;++n)e.push(arguments[n]);var i={then:function(t){return this._then=t,this},catch:function(t){return this._catch=t,this}},s=this;return o=i,s.queue.push(o),window.postMessage({target:"contentscript",data:{to:s.options.address,value:"0",contract:{function:t,args:JSON.stringify(e)}},method:"neb_sendTransaction"},"*"),i}var o},i.prototype.locCall=function(){if(0<arguments.length){for(var t=arguments[0],e=[],n=1;n<arguments.length;++n)e.push(arguments[n]);var i={then:function(t){return this._then=t,this},catch:function(t){return this._catch=t,this}},s=this;return o=i,(a=s.account)||(a=c.NewAccount().getAddressString()),s.neb.api.call({from:a,to:s.options.address,value:0,nonce:r++,gasPrice:1e6,gasLimit:2e6,contract:{function:t,args:JSON.stringify(e)}}).then(function(t){o._then&&o._then(t)}).catch(function(t){o._catch&&o._catch(t)}),i}var o,a},e.exports=new i},{}],2:[function(t,e,n){var a=t("./localization"),r=t("./account"),c=t("./loading_spinner"),l=t("./timeformat"),i=t("./console_output"),h=t("./comment"),s="xyn-"+Math.random()+Date.now(),o=new Ipfs({repo:s});a();var p,u,d=$("#title"),f=$(".app-cover"),m=$(".app-name"),v=$(".app-date"),g=$(".app-des"),w=$(".app-owner .owner-name"),x=$("#downloadButton"),y=new i($("#console")),_=$("#releasesPopover"),L=$("#versionsButton"),k=$("#versionCode");function A(t){p=t,d.text(t.name),f.css("background-image","url('"+t.pic_address+"')"),m.text(t.name),w.text(t.owner),w.attr("data-wallet",t.owner),Profiles.elem(w[0]),v.text(a.loc("Last modified")+":"+l(new Date(1e3*t.last_timestamp),"yyyy-MM-dd")),t.des&&g.html(markdown.toHTML(t.des)),N(u=p.releases[0]);var e=_.find(".popover-body");e.empty();for(var n=0,i=p.releases.length;n<i;++n){var s=p.releases[n],o=$('<a href="javascript:void(0)" data-index="'+n+'">v'+s.version+"</a>");o.click(function(){var t=parseInt(this.getAttribute("data-index"));t<p.releases.length&&N(u=p.releases[t])}),e.append(o)}}var b=location.hash.replace(/^\#/,"").split("/"),D=localStorage.tmp_app_info,C=null;function E(t){c.show(c.LOADING),r.locCall("fetchOne",t).then(function(t){A(JSON.parse(t.result)),c.setStatus(c.CHECKED),c.miss(600)}).catch(function(t){c.setStatus(c.FAILED),c.miss(600)})}function N(t){k.text("v"+t.version)}D&&(C=JSON.parse(D)),2<=b.length&&(C&&C.owner===b[0]&&C.app_id===b[1]?(A(C),C.test||E(b[0]+"/"+b[1])):E(b[0]+"/"+b[1]));var S=!1;o.on("ready",function(){S=!0});var O,I=x.find(".spin");x.click(function(){var s;S&&p&&(x.attr("disabled","disabled"),I.css("display","inline-block"),y.$elem.slideDown(),s=u.address,y.log("Fetch info : ipfs/"+s),O=setTimeout(function(){var t="You can try the direct links:<br>";t+="<a href='https://ipfs.leiyun.org/ipfs/"+s+"' target='_blank'>https://ipfs.leiyun.org/ipfs/"+s+"</a><br>",t+="<a href='https://ipfs.io/ipfs/"+s+"' target='_blank'>https://ipfs.io/ipfs/"+s+"</a><br>",t+="<a href='https://gateway.ipfs.guide/ipfs/"+s+"' target='_blank'>https://gateway.ipfs.guide/ipfs/"+s+"</a><br>",y.log(t)},5e3),o.object.get(s,function(t,e){if(t)y.error("Failed : "+t);else{var n;if(0===e.links.length)n=!0;else{var i=e.links[0];n=0===i.name.length}n?(y.log("Got info "+e.size/1e3+"kb"),o.files.cat(s,function(t,e){if(t)y.error("Failed : "+t);else{var n=new Blob(e,{type:"octet/stream"}),i=document.createElement("div");i.innerText="Got : ",i.className="out-log";var s=document.createElement("a");s.href=window.URL.createObjectURL(n),i.appendChild(s),y.html(i),s.click(),O&&clearTimeout(O)}})):y.error("Failed : no single file.")}}))});var M=!1;document.onclick=function(){M&&(_.slideUp(),M=!1)},L.click(function(){if(!M){var t=L[0].getBoundingClientRect();_.css("left",t.left+"px"),_.css("top",t.bottom+"px"),_.slideDown(),setTimeout(function(){M=!0},100)}});var P=$(".post-comment"),H=$("#commentPreview"),T=$(".preview-button"),F=$("#commentPoster"),U=$(".comments"),q=[];r.onAccount=function(t){$(".no-login").slideUp(),P.slideDown()},P.on("submit",function(){if(!p)return null;for(var t=P.serializeArray(),e={},n=0,i=t.length;n<i;++n){var s=t[n];e[s.name]=s.value}var o=e.content.trim();return 0===o.length?(c.show(c.FAILED,a.loc("Lack of Content")),c.miss(1600)):(c.show(c.LOADING),r.transaction("postComment",p.owner+"/"+p.app_id,o).then(function(t){var e=new h({owner:r.account,content:o});q.unshift(e),U.preppend(e.$elem),F.val(""),c.setStatus(c.CHECKED),c.miss(1600)}).catch(function(t){c.setStatus(c.FAILED),c.miss(1600)})),!1});var K,R,J=!1;T.click(function(){(J=!J)?(F.slideUp(),H.slideDown(),H.html(markdown.toHTML(F.val()))):(F.slideDown(),H.slideUp())}),K=location.hash.replace(/^\#/,""),R=!0,r.locCall("fetchComments",K,null).then(function(t){R&&(q.splice(0,q.length),U.empty());for(var e=JSON.parse(t.result),n=0,i=e.length;n<i;++n){var s=new h(e[n]);q.push(s),U.append(s.$elem)}}).catch(function(t){})},{"./account":1,"./comment":3,"./console_output":4,"./loading_spinner":5,"./localization":7,"./timeformat":8}],3:[function(t,e,n){e.exports=function(t){this.data=t,this.$elem=$('<div class="comment"><div class="comment-owner"></div><div class="comment-content"></div> </div>'),this.$owner=this.$elem.find(".comment-owner"),this.$content=this.$elem.find(".comment-content"),this.$owner.text(t.owner),this.$owner.attr("data-wallet",t.owner),Profiles.elem(this.$owner[0]),this.$content.html(markdown.toHTML(t.content))}},{}],4:[function(t,e,n){function i(t){this.$elem=t}i.prototype.error=function(t){"string"==typeof t?this._input("<div class='out-error'>"+t+"</div>"):t instanceof HTMLElement?this._input("<div class='out-error'>"+$(t).html()+"</div>"):this._input("<div class='out-error'>"+JSON.stringify(t)+"</div>")},i.prototype.log=function(t){"string"==typeof t?this._input("<div class='out-log'>"+t+"</div>"):t instanceof HTMLElement?this._input("<div class='out-log'>"+$(t).html()+"</div>"):this._input("<div class='out-log'>"+JSON.stringify(t)+"</div>")},i.prototype.warn=function(t){"string"==typeof t?this._input("<div class='out-warn'>"+t+"</div>"):t instanceof HTMLElement?this._input("<div class='out-warn'>"+$(t).html()+"</div>"):this._input("<div class='out-warn'>"+JSON.stringify(t)+"</div>")},i.prototype._input=function(t){t=t.replace("\n","<br/>");var e=$(t);e.hide(),this.$elem.prepend(e),e.slideDown()},i.prototype.html=function(t){var e=$(t);e.hide(),this.$elem.prepend(e),e.slideDown()},e.exports=i},{}],5:[function(t,e,n){function s(){this.status=s.LOADING,this.LOADING=0,this.CHECKED=1,this.FAILED=2}s.HTML='<div id="loadingCell"></div>',s.LOADING=0,s.CHECKED=1,s.FAILED=2,s.prototype.show=function(t,e){this.$elem||(this.$elem=$(s.HTML),$("body").append(this.$elem),this.children=[],this.$loading=$('<div class="loading" style="display: none"></div>'),this.$elem.append(this.$loading),this.$check=$('<div class="octicon octicon-check text-success" style="display: none"></div>'),this.$elem.append(this.$check),this.$failed=$('<div class="octicon octicon-x text-danger" style="display: none"></div>'),this.$elem.append(this.$failed),this.$text=$('<div class="text"></div>'),this.$elem.append(this.$text),this.$elem.css("right","-10px"),this.$elem.css("opacity","0"),this.children.push(this.$loading),this.children.push(this.$check),this.children.push(this.$failed)),this.timer&&clearTimeout(this.timer),t=t||s.LOADING,this.children[t].css("display","block"),this.setStatus(t,e)},s.prototype.miss=function(t){t=t||0;var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.$elem.stop(),e.$elem.animate({right:"-10px",opacity:"0"},600,function(){e.$check.css("display","none"),e.$failed.css("display","none"),e.$text.css("display","none")}),e.timer=null},t)},s.prototype.setStatus=function(t,e){if(t!=this.status&&this.$elem){var n=this.status;this.status=t,this.children[n]&&this.children[n].fadeOut("fast"),this.children[this.status]&&this.children[this.status].fadeIn("fast")}e=e||"";var i=0;this.$text.text()!=e&&(this.$text.text(e),i=this.$text.width()),t===s.FAILED?(this.$text.removeClass("text-success"),this.$text.addClass("text-danger")):(t===s.CHECKED?this.$text.addClass("text-success"):this.$text.removeClass("text-success"),this.$text.removeClass("text-danger")),0<e.length&&this.$text.css("display","inline"),this.$elem.stop(),this.$elem.animate({right:i+20+"px",opacity:"1"},600)},e.exports=new s},{}],6:[function(t,e,n){e.exports={"zh-CN":{Android:"安卓应用",DApp:"DApp",Post:"提交应用",Name:"名字",Cover:"封面","Not login":"没有检测到账户信息，请先登陆 或者 安装账户插件",Address:"应用地址",Version:"版本号","App ID":"App ID",Submit:"提交","Lack of name":"没有名字","Lack of cover":"没有封面","Lack of app id":"没有AppID","Lack of version":"没有版本号","Lack of address":"没有地址",Output:"输出:",Success:"成功",Failed:"失败","Last modified":"更新","Download APK":"下载APK","Other versions":"其他版本",Uploader:"UP主",Description:"描述","My Apps":"我的应用",Select:"选取",Visible:"可见","Lack of des":"没有简介",Preview:"预览",Comments:"评论","Post Comment":"发送","Ipfs hash":"Ipfs Hash","Upload link":"上传地址",instructions1:"如果只需要更新信息不用填入版本号和地址"},en:{Android:"Android",DApp:"DApp",Post:"Post Application",Name:"Name",Cover:"Cover","Not login":"No account info found, login first or install plugin",Address:"Address",Version:"Version","App ID":"App ID",Submit:"Submit","Lack of name":"Lack of name","Lack of cover":"Lack of cover","Lack of app id":"Lack of APP ID","Lack of version":"Lack of version","Lack of address":"Lack of address",Output:"Output",Success:"Success",Failed:"Failed","Last modified":"Modified","Download APK":"Download APK","Other versions":"Other versions",Uploader:"Uploader",Description:"Description","My Apps":"My Apps",Select:"Select",Visible:"Visible","Lack of des":"Lack of description",Preview:"Preview",Comments:"Comments","Post Comment":"Post Comment","Ipfs hash":"Ipfs Hash","Upload link":"Upload link",instructions1:"Version and Address is optional when update app info."}}},{}],7:[function(t,e,n){var i,s=t("./loc.json");function o(){$("*[data-text]").each(function(){var t=$(this);t.text(a(t.attr("data-text")))}),$("*[data-placeholder]").each(function(){var t=$(this);t.attr("placeholder",a(t.attr("data-placeholder")))})}function a(t){return o.words[t]||t}i=navigator.language?navigator.language:navigator.browserLanguage,o.loc=a,o.words=/^zh/.test(i)?s["zh-CN"]:s.en,e.exports=o},{"./loc.json":6}],8:[function(t,e,n){e.exports=function(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e}},{}]},{},[2]);